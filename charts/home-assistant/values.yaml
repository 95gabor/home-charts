# Default values for home-assistant.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Number of replicas for the Home Assistant deployment
replicaCount: 1

# -- Image configuration for Home Assistant
# @default -- See `values.yaml`
image:
  # -- Home Assistant image repository
  repository: homeassistant/home-assistant
  # -- Image pull policy
  pullPolicy: IfNotPresent
  # -- Overrides the image tag whose default is the chart appVersion.
  # @default -- empty
  tag: ""

# -- Image pull secrets for private registries
imagePullSecrets: []
# -- Override the name of the chart
# @default -- empty
nameOverride: ""
# -- Override the full name of the chart
# @default -- empty
fullnameOverride: ""

# -- Home Assistant specific configuration
# @default -- See `values.yaml`
homeAssistant:
  # -- Timezone for Home Assistant
  timezone: Europe/Budapest
  # -- Home Assistant configuration files
  # @default -- See `values.yaml`
  configurations:
    # -- Main configuration.yaml content
    configuration.yaml: |
      default_config:

      group: !include groups.yaml
      script: !include scripts.yaml
      scene: !include scenes.yaml
      # automation: !include automations.yaml
    # -- Groups configuration
    groups.yaml: |
      # place your groups here
    # -- Scripts configuration
    scripts.yaml: |
      # place your scripts here
    # -- Scenes configuration
    scenes.yaml: |
      # place your scenes here
  # -- Secrets configuration for Home Assistant
  secrets: []
    # postgres-url:
    #   key: postgres_url
    #   secretName: home-assistant-database-credentials
    #   subPath: POSTGRES_URL

# -- Pod annotations
# @default -- See `values.yaml`
podAnnotations: {}
# -- Pod labels
# @default -- See `values.yaml`
podLabels: {}

# -- Pod security context
# @default -- See `values.yaml`
podSecurityContext: {}
  # fsGroup: 2000

# -- Security context for the container
# @default -- See `values.yaml`
securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

# -- Service configuration
# @default -- See `values.yaml`
service:
  # -- Service type
  type: ClusterIP
  # -- Service port
  port: 80
  # -- Service port name
  portName: http

# -- Ingress configuration
# @default -- See `values.yaml`
ingress:
  # -- Enable ingress
  enabled: false
  # -- Ingress class name
  # @default -- empty
  className: ""
  # -- Ingress annotations
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  # -- Ingress hosts configuration
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  # -- TLS configuration for ingress
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

# -- Container configuration
# @default -- See `values.yaml`
container:
  # -- Container port
  port: 8123

# -- DNS policy for pods
# @default -- "ClusterFirst"
dnsPolicy: "ClusterFirst"

# -- DNS configuration for pods
# @default -- empty
dnsConfig: {}

# -- Termination grace period in seconds
# @default -- empty
terminationGracePeriodSeconds: ""

# -- Environment variables
env: []

# -- Resource limits and requests
# @default -- See `values.yaml`
resources:
  # -- Resource limits
  limits:
    cpu: 2000m
    memory: 2Gi
  # -- Resource requests
  requests:
    cpu: 500m
    memory: 512Mi

# -- Horizontal Pod Autoscaler configuration
# @default -- See `values.yaml`
autoscaling:
  # -- Enable horizontal pod autoscaling
  enabled: false
  # -- Minimum number of replicas
  minReplicas: 1
  # -- Maximum number of replicas
  maxReplicas: 100
  # -- Target CPU utilization percentage
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

# -- Node selector for pod placement
# @default -- See `values.yaml`
nodeSelector: {}

# -- Tolerations for pod scheduling
tolerations: []

# -- Affinity rules for pod scheduling
# @default -- See `values.yaml`
affinity: {}

# -- Persistence configuration
# @default -- See `values.yaml`
persistence:
  # -- Storage class for PVC
  # storageClass: ''
  # -- Size of the persistent volume
  size: 4Gi
  # -- Access mode for the persistent volume
  accessMode: ReadWriteOnce

# -- TLS certificate configuration via cert-manager
# @default -- See `values.yaml`
certificate:
  # -- Enable certificate management
  enabled: false
  # -- Secret name for the TLS certificate
  secretName: home-assistant-tls
  # -- Domain name for the certificate
  domain: home.example.com
  # -- Additional hosts for the certificate
  additionalHosts: []
  # -- Certificate duration
  # @default -- empty
  duration: ""
  # -- Certificate renewal time before expiry
  # @default -- empty
  renewBefore: ""
  # -- Certificate issuer configuration
  # @default -- See `values.yaml`
  issuer:
    # -- Issuer group
    # @default -- empty
    group: ""
    # -- Issuer kind
    # @default -- empty
    kind: ""
    # -- Issuer name
    # @default -- empty
    name: ""
  # -- Private key configuration
  # @default -- See `values.yaml`
  privateKey:
    # -- Private key rotation policy
    rotationPolicy: Never
    # -- Private key encoding
    encoding: PKCS1
    # -- Private key algorithm
    algorithm: RSA
    # -- Private key size
    size: 2048
  # -- Certificate annotations
  # @default -- See `values.yaml`
  annotations: {}
  # -- Certificate usages
  usages: []

# -- ServiceMonitor configuration for Prometheus
# @default -- See `values.yaml`
serviceMonitor:
  # -- Enable ServiceMonitor
  enabled: false
  # -- Scrape interval
  interval: 30s
  # -- Scrape timeout
  scrapeTimeout: 10s
  # -- Relabeling configuration
  relabelings: []
  # -- Metric relabeling configuration
  metricRelabelings: []
  # -- Service selector
  # @default -- See `values.yaml`
  selector: {}
  # -- Service scheme
  # @default -- empty
  scheme: ""
  # -- TLS configuration
  # @default -- See `values.yaml`
  tlsConfig: {}
  # -- Namespace for ServiceMonitor
  # @default -- empty
  namespace: "" # "monitoring"
  # -- Additional labels for ServiceMonitor
  # @default -- See `values.yaml`
  additionalLabels: {}
  # -- Annotations for ServiceMonitor
  # @default -- See `values.yaml`
  annotations: {}
  # bearerTokenSecret:
  #   name: home-assistant-scrape-token
  #   key: token

# -- Pod Disruption Budget configuration
# @default -- See `values.yaml`
podDisruptionBudget:
  # -- Enable Pod Disruption Budget
  enabled: false
  # -- Minimum number of available pods (mutually exclusive with maxUnavailable)
  # @default -- empty
  minAvailable: ""
  # -- Maximum number of unavailable pods (mutually exclusive with minAvailable)
  # @default -- empty
  maxUnavailable: ""

# -- Network Policy configuration
# @default -- See `values.yaml`
networkPolicy:
  # -- Enable Network Policy
  enabled: false
  # -- Ingress rules
  # @default -- empty
  ingress: []
  # Example:
  # - from:
  #   - namespaceSelector:
  #       matchLabels:
  #         name: ingress-nginx
  #   ports:
  #   - protocol: TCP
  #     port: 80
  # - from:
  #   - podSelector:
  #       matchLabels:
  #         app: monitoring
  #   ports:
  #   - protocol: TCP
  #     port: 8123
  # -- Egress rules
  # @default -- empty
  egress: []
  # Example:
  # - to:
  #   - namespaceSelector:
  #       matchLabels:
  #         name: postgres
  #   ports:
  #   - protocol: TCP
  #     port: 5432

# -- PostgreSQL operator configuration
# @default -- See `values.yaml`
postgresOperator:
  # -- Enable PostgreSQL operator integration
  enabled: false
  # -- Annotations for PostgreSQL resources
  # @default -- See `values.yaml`
  annotations: {}
  # -- Database name
  databaseName: home-assistant
  # -- Drop database on delete
  dropOnDelete: false
  # -- Master role name
  masterRole: home-assistant
  # -- Database schema
  schema: home-assistant
  # -- Database role
  role: home-assistant
  # -- Secret name for database credentials
  secretName: home-assistant-database-credentials
  # -- Database privileges
  privileges: OWNER
#  secretTemplate:       # Output secrets can be customized using standard Go templates
#    POSTGRES_URL: "postgresql://{{.Role}}:{{.Password}}@{{.Host}}/{{.Database}}"
