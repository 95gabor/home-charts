# Default values for home-assistant.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Number of replicas for the Home Assistant deployment
replicaCount: 1

# -- Image configuration for Home Assistant
# @default -- See `values.yaml`
image:
  # -- Container image repository for Home Assistant
  repository: homeassistant/home-assistant
  # -- Image pull policy (IfNotPresent, Always, Never)
  pullPolicy: IfNotPresent
  # -- Container image tag (overrides chart appVersion if set)
  # @default -- empty
  tag: ""

# -- Image pull secrets for private registries
imagePullSecrets: []
# -- Override the name of the chart
# @default -- empty
nameOverride: ""
# -- Override the full name of the chart
# @default -- empty
fullnameOverride: ""

# -- Home Assistant specific configuration
# @default -- See `values.yaml`
homeAssistant:
  # -- Timezone for Home Assistant (IANA timezone database name)
  timezone: Europe/Budapest
  # -- Home Assistant configuration files (mounted as ConfigMap)
  # @default -- See `values.yaml`
  configurations:
    # -- Main configuration.yaml content
    # @default -- See `values.yaml`
    configuration.yaml: |
      default_config:

      group: !include groups.yaml
      script: !include scripts.yaml
      scene: !include scenes.yaml
      # automation: !include automations.yaml
    # -- Groups configuration
    # @default -- See `values.yaml`
    groups.yaml: |
      # place your groups here
    # -- Scripts configuration
    # @default -- See `values.yaml`
    scripts.yaml: |
      # place your scripts here
    # -- Scenes configuration
    # @default -- See `values.yaml`
    scenes.yaml: |
      # place your scenes here
  # -- Secrets configuration for Home Assistant
  secrets: []
    # postgres-url:
    #   key: postgres_url
    #   secretName: home-assistant-database-credentials
    #   subPath: POSTGRES_URL

# -- Pod annotations (metadata attached to pods)
podAnnotations: {}
# -- Pod labels (metadata for pod selection and organization)
podLabels: {}

# -- Pod security context (applies to all containers in the pod)
podSecurityContext: {}
  # fsGroup: 2000

# -- Security context for the container (applies to the main container)
securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

# -- Service configuration
# @default -- See `values.yaml`
service:
  # -- Kubernetes service type (ClusterIP, NodePort, LoadBalancer)
  type: ClusterIP
  # -- Service port number exposed by the service
  port: 80
  # -- Name of the service port
  portName: http

# -- Ingress configuration
# @default -- See `values.yaml`
ingress:
  # -- Enable ingress resource creation
  enabled: false
  # -- Ingress class name (e.g., nginx, traefik)
  # @default -- empty
  className: ""
  # -- Ingress annotations (e.g., for cert-manager, nginx settings)
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  # -- Ingress hosts configuration
  # Each host can be configured with a single path (using 'path' and 'pathType')
  # or multiple paths (using 'paths' array). If 'paths' is specified, it takes precedence.
  hosts: []
  # Example with single path:
  # - host: home-assistant.example.com
  #   path: /
  #   pathType: Prefix
  # Example with multiple paths:
  # - host: home-assistant.example.com
  #   paths:
  #     - path: /api
  #       pathType: Prefix
  #     - path: /
  #       pathType: Prefix
  # -- TLS configuration for ingress (certificate secrets)
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

# -- Container configuration
# @default -- See `values.yaml`
container:
  # -- Port number the container listens on
  port: 8123

# -- DNS policy for pods
# @default -- "ClusterFirst"
dnsPolicy: "ClusterFirst"

# -- DNS configuration for pods
dnsConfig: {}

# -- Termination grace period in seconds
# @default -- empty
terminationGracePeriodSeconds: ""

# -- Environment variables
env: []

# -- Resource limits and requests
# @default -- See `values.yaml`
resources:
  # -- Resource limits
  # @default -- See `values.yaml`
  limits:
    # -- CPU limit for the container
    cpu: 2000m
    # -- Memory limit for the container
    memory: 2Gi
  # -- Resource requests
  # @default -- See `values.yaml`
  requests:
    # -- CPU request for the container
    cpu: 500m
    # -- Memory request for the container
    memory: 512Mi

# -- Horizontal Pod Autoscaler configuration
# @default -- See `values.yaml`
autoscaling:
  # -- Enable Horizontal Pod Autoscaler to automatically scale pods based on metrics
  enabled: false
  # -- Minimum number of pod replicas to maintain
  minReplicas: 1
  # -- Maximum number of pod replicas allowed
  maxReplicas: 100
  # -- Target CPU utilization percentage for autoscaling (0-100)
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

# -- Node selector for pod placement (constrain pods to specific nodes)
nodeSelector: {}

# -- Tolerations for pod scheduling (allow pods to be scheduled on tainted nodes)
tolerations: []

# -- Affinity rules for pod scheduling (pod affinity/anti-affinity, node affinity)
affinity: {}

# -- Persistence configuration
# @default -- See `values.yaml`
persistence:
  # -- Storage class for PVC (empty = use default storage class)
  # @default -- empty
  storageClass: ""
  # -- Size of the persistent volume claim
  size: 4Gi
  # -- Access mode for the persistent volume (ReadWriteOnce, ReadWriteMany, ReadOnlyMany)
  accessMode: ReadWriteOnce

# -- TLS certificate configuration via cert-manager
# @default -- See `values.yaml`
certificate:
  # -- Enable automatic TLS certificate management using cert-manager
  enabled: false
  # -- Kubernetes secret name where the TLS certificate will be stored
  secretName: home-assistant-tls
  # -- Primary domain name for the TLS certificate
  domain: home.example.com
  # -- Additional hostnames to include in the certificate (SAN entries)
  additionalHosts: []
  # -- Certificate validity duration (e.g., "2160h" for 90 days)
  # @default -- empty
  duration: ""
  # -- Time before certificate expiry to start renewal (e.g., "720h" for 30 days)
  # @default -- empty
  renewBefore: ""
  # -- Certificate issuer configuration
  # @default -- See `values.yaml`
  issuer:
    # -- API group of the issuer resource (e.g., "cert-manager.io")
    # @default -- empty
    group: ""
    # -- Kind of the issuer resource (Issuer or ClusterIssuer)
    # @default -- empty
    kind: ""
    # -- Name of the issuer resource
    # @default -- empty
    name: ""
  # -- Private key configuration
  # @default -- See `values.yaml`
  privateKey:
    # -- Private key rotation policy (Never, Always, OnKeyRotation)
    rotationPolicy: Never
    # -- Private key encoding format (PKCS1 or PKCS8)
    encoding: PKCS1
    # -- Private key algorithm (RSA or ECDSA)
    algorithm: RSA
    # -- Private key size in bits (for RSA: 2048, 4096; for ECDSA: 256, 384, 521)
    size: 2048
  # -- Annotations to add to the Certificate resource
  annotations: {}
  # -- Certificate key usages (e.g., ["signing", "key encipherment", "server auth"])
  usages: []

# -- ServiceMonitor configuration for Prometheus
# @default -- See `values.yaml`
serviceMonitor:
  # -- Enable ServiceMonitor resource for Prometheus Operator
  enabled: false
  # -- Interval at which Prometheus should scrape metrics
  interval: 30s
  # -- Timeout for metric scraping
  scrapeTimeout: 10s
  # -- Relabeling rules applied before scraping
  relabelings: []
  # -- Metric relabeling rules applied after scraping
  metricRelabelings: []
  # -- Service selector to match the service
  selector: {}
  # -- Protocol scheme for scraping (http or https)
  # @default -- empty
  scheme: ""
  # -- TLS configuration for secure scraping
  tlsConfig: {}
  # -- Namespace where the ServiceMonitor should be created
  # @default -- empty
  namespace: "" # "monitoring"
  # -- Additional labels to add to the ServiceMonitor
  additionalLabels: {}
  # -- Annotations to add to the ServiceMonitor
  annotations: {}
  # bearerTokenSecret:
  #   name: home-assistant-scrape-token
  #   key: token

# -- Pod Disruption Budget configuration
# @default -- See `values.yaml`
podDisruptionBudget:
  # -- Enable Pod Disruption Budget to control pod evictions during disruptions
  enabled: false
  # -- Minimum number of available pods during disruptions (mutually exclusive with maxUnavailable)
  # @default -- empty
  minAvailable: ""
  # -- Maximum number of unavailable pods during disruptions (mutually exclusive with minAvailable)
  # @default -- empty
  maxUnavailable: ""

# -- Network Policy configuration
# @default -- See `values.yaml`
networkPolicy:
  # -- Enable Network Policy to control network traffic to/from pods
  enabled: false
  # -- Ingress rules defining allowed incoming traffic
  # @default -- empty
  ingress: []
  # Example:
  # - from:
  #   - namespaceSelector:
  #       matchLabels:
  #         name: ingress-nginx
  #   ports:
  #   - protocol: TCP
  #     port: 80
  # - from:
  #   - podSelector:
  #       matchLabels:
  #         app: monitoring
  #   ports:
  #   - protocol: TCP
  #     port: 8123
  # -- Egress rules defining allowed outgoing traffic
  # @default -- empty
  egress: []
  # Example:
  # - to:
  #   - namespaceSelector:
  #       matchLabels:
  #         name: postgres
  #   ports:
  #   - protocol: TCP
  #     port: 5432

# -- PostgreSQL operator configuration
# @default -- See `values.yaml`
postgresOperator:
  # -- Enable PostgreSQL operator integration for automatic database provisioning
  enabled: false
  # -- Annotations to add to PostgreSQL resources created by the operator
  annotations: {}
  # -- Name of the PostgreSQL database to create
  databaseName: home-assistant
  # -- Whether to drop the database when the resource is deleted
  dropOnDelete: false
  # -- Master role name for the database
  masterRole: home-assistant
  # -- Database schema name
  schema: home-assistant
  # -- Database role name for application access
  role: home-assistant
  # -- Kubernetes secret name where database credentials will be stored
  secretName: home-assistant-database-credentials
  # -- Database privileges granted to the role (OWNER, READ, WRITE)
  privileges: OWNER
#  secretTemplate:       # Output secrets can be customized using standard Go templates
#    POSTGRES_URL: "postgresql://{{.Role}}:{{.Password}}@{{.Host}}/{{.Database}}"
